extends layouts
block content
    link(rel="stylesheet" href="/css/movie-details.css")
    div.container
        div.d-flex.justify-content-center
                h2.my-2 #{movie.title}
        div.containerGrid(style="border: 3px solid black; border-radius: 20px;  background-color: #383434; background-clip: padding-box;")
            div.col1(style="padding: 10px;")
                div.row
                    div.col.d-flex.justify-content-center
                        img(src= config.images.base_url + config.images.backdrop_sizes[0] + movie.poster_path, style="width: 100%; height: 100%; border-radius: 20px;")
                    div.col
                        div#rating.progress.my-2(style="background-color: black;")
                        h5 Genres:
                        div#genres.d-flex.flex-wrap.my-2(style="gap: 10px;")
                        h6 Keyword:
                        div#keywords.d-flex.flex-wrap.my-2(style="gap: 10px;")
                hr
                div.row
                    h5 Overwiew
                    p #{movie.overview}
            div#trailer.col2.ratio.ratio-16x9(style="background-color: black; border-radius: 20px;")
                iframe#trailer-iframe(src="https://www.youtube.com/embed/" + trailerKey, style="border-radius: 20px;", allowfullscreen)
    script.
        let M = !{JSON.stringify(movie)};
        let K = !{JSON.stringify(keywords)};//Array di oggetti keyword (id, name)

        for(let i = 0; i < M.genres.length; i++) {
            $('#genres').append(`<div class="p-2 badge rounded-pill text-bg-secondary" style="font-size: 13px;">${M.genres[i].name}</div>`);
         }

        for(let i = 0; i < K.length; i++) {
            $('#keywords').append(`<div>#${K[i].name}</div>`);
         }

        $('#rating').append(`<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: ${M.vote_average * 10}%;" aria-valuenow="${M.vote_average * 10}" aria-valuemin="0" aria-valuemax="100">Rating: ${M.vote_average}</div>`);
        if(M.vote_average < 3.3){
            $('#rating').children().addClass('bg-danger');
        }else if(M.vote_average < 6.6){
            $('#rating').children().addClass('bg-info');
        }else{
            $('#rating').children().addClass('bg-success');
        }